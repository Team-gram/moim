{"version":3,"file":"js/830.c8da2475.js","mappings":"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","sources":["webpack://gramvue2/./node_modules/kalendar-vue/dist/kalendar-cell-30994ac7.js"],"sourcesContent":["import { g as getLocaleTime, c as cloneObject, b as _objectSpread2, d as __vue_normalize__, e as __vue_create_injector__ } from './index-478f7fa6.js';\nimport 'vue';\n\nvar script = {\n  props: ['creator', 'index', 'cellData', 'constructedEvents', 'temporaryEvent'],\n  inject: ['kalendar_options'],\n  components: {\n    KalendarEvent: function KalendarEvent() {\n      return import('./kalendar-event-305bf9ae.js');\n    }\n  },\n  computed: {\n    cell_events: function cell_events() {\n      var all_events = [];\n\n      if (this.completed_events) {\n        all_events = all_events.concat(this.completed_events);\n      }\n\n      if (this.being_created) {\n        all_events = all_events.concat(this.being_created);\n      }\n\n      return all_events;\n    },\n    completed_events: function completed_events() {\n      return this.constructedEvents && this.constructedEvents.hasOwnProperty(this.cellData.value) && this.constructedEvents[this.cellData.value];\n    },\n    being_created: function being_created() {\n      return this.temporaryEvent && this.temporaryEvent.start.value === this.cellData.value && this.temporaryEvent;\n    },\n    overlappingEvents: function overlappingEvents() {\n      var _this = this;\n\n      if (!this.constructedEvents || this.cell_events.length < 1) return [];\n      return Object.values(this.constructedEvents).flat().filter(function (event) {\n        var cellDate = new Date(_this.cellData.value);\n        var eventStarts = new Date(event.start.value);\n        var eventEnds = new Date(event.end.value);\n        return eventStarts < cellDate && eventEnds > cellDate;\n      });\n    },\n    overlapValue: function overlapValue() {\n      var length = this.overlappingEvents.length;\n      return length > 2 ? 2 : length;\n    },\n    selected: function selected() {\n      return this.cell_events && this.cell_events.length > 0;\n    },\n    hasPopups: function hasPopups() {\n      return this.selected && !!this.cell_events.find(function (ev) {\n        return ev.status === 'popup-initiated';\n      });\n    }\n  },\n  methods: {\n    mouseDown: function mouseDown() {\n      // user mouse got depressed while outside kalendar-cells\n      // came back in and clicked while the creator was on\n      if (!!this.creator.creating) {\n        this.mouseUp();\n        return;\n      }\n\n      var _this$kalendar_option = this.kalendar_options,\n          read_only = _this$kalendar_option.read_only,\n          overlap = _this$kalendar_option.overlap,\n          past_event_creation = _this$kalendar_option.past_event_creation;\n      if (read_only) return; // if past_event_creation is set to false, check if cell value is\n      // before current time\n\n      if (past_event_creation === false) {\n        var now = getLocaleTime(new Date());\n\n        if (new Date(now) > new Date(this.cellData.value)) {\n          this.mouseUp();\n          return;\n        }\n      } // if overlap is set to false, prevent selection on top of\n      // other events\n      if (!overlap && this.cell_events.length > 0) return; // close any open popups in the whole kalendar instance\n      // before starting a new one\n\n      this.$kalendar.closePopups(); // create a payload consisting of\n      // starting, current, ending and originalStarting cell\n      // starting, current and ending are self explanatory\n      // but originalStarting cell is required\n      // to determine the direction of the scroll/drag\n\n      var payload = {\n        creating: true,\n        original_starting_cell: cloneObject(this.cellData),\n        starting_cell: cloneObject(this.cellData),\n        current_cell: cloneObject(this.cellData),\n        ending_cell: cloneObject(this.cellData)\n      };\n      this.$emit('select', payload);\n    },\n    mouseMove: function mouseMove() {\n      // same guards like in the mouseDown function\n      var _this$kalendar_option2 = this.kalendar_options,\n          read_only = _this$kalendar_option2.read_only,\n          overlap = _this$kalendar_option2.overlap;\n      if (read_only) return;\n      if (this.creator && !this.creator.creating) return;\n      var _this$creator = this.creator,\n          starting_cell = _this$creator.starting_cell,\n          original_starting_cell = _this$creator.original_starting_cell,\n          creating = _this$creator.creating; // direction of scroll\n\n      var going_down = this.cellData.index >= starting_cell.index && starting_cell.index === original_starting_cell.index;\n\n      if (creating) {\n        var payload = _objectSpread2(_objectSpread2({}, this.creator), {}, {\n          current_cell: this.cellData,\n          ending_cell: this.cellData,\n          direction: going_down ? 'normal' : 'reverse'\n        });\n\n        this.$emit('select', payload);\n      }\n    },\n    mouseUp: function mouseUp() {\n      if (this.kalendar_options.read_only) return;\n\n      if (this.creator.creating) {\n        this.$emit('initiatePopup');\n      }\n    },\n    resetCreator: function resetCreator() {\n      this.$emit('reset');\n    },\n    isAnHour: function isAnHour(index) {\n      if (this.kalendar_options.hourlySelection) {\n        return true;\n      } else {\n        return (index + 1) % (60 / 10) === 0;\n      }\n    }\n  }\n};\n\n/* script */\nvar __vue_script__ = script;\n/* template */\n\nvar __vue_render__ = function __vue_render__() {\n  var _vm = this;\n\n  var _h = _vm.$createElement;\n\n  var _c = _vm._self._c || _h;\n\n  return _vm.cellData.visible ? _c('li', {\n    staticClass: \"kalendar-cell\",\n    class: {\n      selected: _vm.selected,\n      'is-an-hour': _vm.isAnHour(_vm.index),\n      'has-events': _vm.cell_events && _vm.cell_events.length > 0,\n      'being-created': !!_vm.being_created || _vm.hasPopups\n    },\n    style: \"\\n  height: \" + _vm.kalendar_options.cell_height + \"px;\\n\",\n    on: {\n      \"mouseover\": function mouseover($event) {\n        if ($event.target !== $event.currentTarget) {\n          return null;\n        }\n\n        return _vm.mouseMove();\n      },\n      \"mousedown\": function mousedown($event) {\n        if ($event.target !== $event.currentTarget) {\n          return null;\n        }\n\n        return _vm.mouseDown();\n      },\n      \"mouseup\": function mouseup($event) {\n        return _vm.mouseUp();\n      }\n    }\n  }, _vm._l(_vm.cell_events, function (event, eventIndex) {\n    return _vm.cell_events && _vm.cell_events.length ? _c('KalendarEvent', {\n      key: eventIndex,\n      style: \"z-index: 10\",\n      attrs: {\n        \"event\": event,\n        \"total\": _vm.cell_events.length,\n        \"index\": eventIndex,\n        \"overlaps\": _vm.overlapValue\n      }\n    }) : _vm._e();\n  }), 1) : _vm._e();\n};\n\nvar __vue_staticRenderFns__ = [];\n/* style */\n\nvar __vue_inject_styles__ = function __vue_inject_styles__(inject) {\n  if (!inject) return;\n  inject(\"data-v-43f6a2ab_0\", {\n    source: \"li{font-size:13px;position:relative}.created-events{height:100%}ul.building-blocks li{z-index:0;border-bottom:dotted 1px var(--odd-cell-border-color)}ul.building-blocks li.first_of_appointment{z-index:1;opacity:1}ul.building-blocks li.is-an-hour{border-bottom:solid 1px var(--table-cell-border-color)}ul.building-blocks li.has-events{z-index:unset}ul.building-blocks li.being-created{z-index:11}\",\n    map: undefined,\n    media: undefined\n  });\n};\n/* scoped */\n\n\nvar __vue_scope_id__ = undefined;\n/* module identifier */\n\nvar __vue_module_identifier__ = undefined;\n/* functional template */\n\nvar __vue_is_functional_template__ = false;\n/* style inject SSR */\n\n/* style inject shadow dom */\n\nvar __vue_component__ = /*#__PURE__*/__vue_normalize__({\n  render: __vue_render__,\n  staticRenderFns: __vue_staticRenderFns__\n}, __vue_inject_styles__, __vue_script__, __vue_scope_id__, __vue_is_functional_template__, __vue_module_identifier__, false, __vue_create_injector__, undefined, undefined);\n\nexport default __vue_component__;\n"],"names":["script","props","inject","components","KalendarEvent","computed","cell_events","all_events","this","completed_events","concat","being_created","constructedEvents","hasOwnProperty","cellData","value","temporaryEvent","start","overlappingEvents","_this","length","Object","values","flat","filter","event","cellDate","Date","eventStarts","eventEnds","end","overlapValue","selected","hasPopups","find","ev","status","methods","mouseDown","creator","creating","mouseUp","_this$kalendar_option","kalendar_options","read_only","overlap","past_event_creation","now","getLocaleTime","$kalendar","closePopups","payload","original_starting_cell","cloneObject","starting_cell","current_cell","ending_cell","$emit","mouseMove","_this$kalendar_option2","_this$creator","going_down","index","_objectSpread2","direction","resetCreator","isAnHour","hourlySelection","__vue_script__","__vue_render__","_vm","_h","$createElement","_c","_self","visible","staticClass","class","style","cell_height","on","$event","target","currentTarget","_l","eventIndex","key","attrs","_e","__vue_staticRenderFns__","__vue_inject_styles__","source","map","undefined","media","__vue_scope_id__","__vue_module_identifier__","__vue_is_functional_template__","__vue_component__","__vue_normalize__","render","staticRenderFns","__vue_create_injector__"],"sourceRoot":""}